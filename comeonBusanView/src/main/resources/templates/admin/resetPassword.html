<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>새 비밀번호 설정 - 새 비밀번호 입력</title>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<style>
</style>
<script src="https://code.jquery.com/jquery-3.7.1.js"
	integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
	crossorigin="anonymous"></script>
</head>

<body>

	<h3>새 비밀번호를 입력해주세요</h3>
	<form name="reset-password-form" id="reset-password-form">
	<input type="hidden" name="uuid" th:value="${uuid}" id="uuid" />
		<label for="new-password">New Password:</label> <input type="password"
			id="new-password" name="newPassword" placeholder="password" required />
		<!-- <input type="password" id="rePassword" name="rePassword" placeholder="rePassword" required /> -->
		<input type="submit" value="등록하기">
	</form>
	<script>
		document.getElementById('reset-password-form')
				.addEventListener(
						'submit',
						function(event) {
							event.preventDefault();
							const password = document
									.getElementById('new-password').value;
							const uuid = document.getElementById('uuid').value;
							console.log(password);

							const passList = {
								uuid : uuid,
								password : password
							};

							$.ajax({
								type : 'POST',
								//enctype : 'multipart/form-data',
								url : 'http://localhost:9002/resetPassword',
								data : JSON.stringify(passList),
								//processData : false,
								contentType : "application/json",
								cache : false,
								success : function(response) {
									alert("비밀번호 변경이 완료되었습니다. 로그인 페이지로 이동합니다.");
									
									window.location.href = "/loginForm";
									
								},
								error : function(e) {
									console.log("error : ", e);
								}
							});

						});
	</script>
</body>
</html>
