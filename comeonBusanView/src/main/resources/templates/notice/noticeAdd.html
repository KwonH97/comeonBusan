<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>공지사항 등록 페이지</title>
<script src="https://code.jquery.com/jquery-3.7.1.js"
	integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
	crossorigin="anonymous"></script>

<style>
body {
	font-family: Arial, sans-serif;
	margin: 0;
	padding: 0;
	background-color: #f4f4f4;
}

h1 {
	text-align: center;
	color: #333;
	margin: 2rem 0;
}

hr {
	margin: 1rem auto;
	width: 80%;
	border: 0;
	border-top: 1px solid #ddd;
}

#container {
	max-width: 800px;
	margin: 2rem auto;
	padding: 1rem;
	background-color: #fff;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	border-radius: 0.5rem;
}

form {
	display: flex;
	flex-direction: column;
}

.form-group {
	display: flex;
	align-items: center;
	margin-bottom: 1rem;
}

.form-group label {
	flex: 1;
	font-weight: bold;
	color: #333;
	margin-right: 0rem; /* Adjusted the margin-right to reduce spacing */
}

.form-group input[type="text"], textarea, .form-group input[type="file"] {
	flex: 2;
	width: 100%;
	padding: 0.75rem;
	border: 1px solid #ddd;
	border-radius: 0.25rem;
	box-sizing: border-box;
}

textarea {
	height: 200px;
}

.form-group input[type="button"] {
	align-self: flex-start;
	margin-top: 1rem;
	padding: 0.75rem 1.5rem;
	background-color: #007BFF;
	color: #fff;
	border: none;
	border-radius: 0.25rem;
	cursor: pointer;
	font-size: 1rem;
}

.form-group input[type="button"]:hover {
	background-color: #0056b3;
}
</style>
</head>
<body>
	<header>
		<th:block th:insert="~{/fragments/header2.html}"></th:block>
	</header>
	<h1>공지사항 등록</h1>


	<div id="container">
		<form name="frm" id="frm">
			<div class="form-group">
				<label for="title">공지제목</label> <input type="text" id="title"
					name="title" required />
			</div>
			<div class="form-group">
				<label for="content">공지내용</label> <textarea id="content"
					name="content"></textarea>
			</div>
			<div class="form-group">
				<label for="file">첨부파일(이미지)</label> <input type="file" id="file"
					name="file" />
			</div>
			<input type="submit" value="등록하기" />
		</form>
	</div>
	<footer>
		<th:block th:insert="~{/fragments/footer.html}"></th:block>
	</footer>
	<script>
		document.getElementById('frm').addEventListener('submit',
				function(event) {
					event.preventDefault();

					submitForm(); 
				});

		function submitForm() {

			alert("submit.......");

			var form = document.getElementById('frm');

			if (!form) {

				console.error("Form not found");
				return;

			}

			var formData = new FormData(form);
			// textarea의 값을 명시적으로 추가
		    var content = document.getElementById('content').value;
		    formData.set('content', content);


			console.log(formData);

			let token = localStorage.getItem("Authorization");

			$.ajax({

				url : "http://localhost:9002/khj/noticeAdd",
				method : "POST",
				enctype : "multipart/form-data",
				headers : {
					"Authorization" : token
				},
				data : formData,
				processData : false,
				contentType : false,
				success : function(response) {

					console.log("success : ", response);

				},
				error : function(e) {

					console.log("error : ", e);
				}

			});

		}
	</script>

</body>
</html>