<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>검색 결과</title>
<script src="https://code.jquery.com/jquery-3.7.1.js"
    integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
<script>
    function search(query) {
        $.ajax({
            url: 'http://localhost:9002/search',
            type: 'GET',
            data: { query: query },
            success: function(results) {
                displayResults(results);
            },
            error: function(error) {
                console.error('Error:', error);
            }
        });
    }

    function displayResults(results) {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';
        results.forEach(result => {
            const div = document.createElement('div');
            div.innerHTML = `<h2>${result.name}</h2><p>${result.description}</p>`;
            resultsDiv.appendChild(div);
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('query');
        if (query) {
            document.getElementById('query-display').innerText = query;
            search(query);
        }
    });
</script>
</head>
<body>
    <header>
        <th:block th:insert="~{/fragments/header2.html}"></th:block>
    </header>
    <h1>검색 결과</h1>
    <p>검색어: <span id="query-display"></span></p>
    <div id="results"></div>
</body>
</html>
