<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Safe Area Map</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
        crossorigin="anonymous"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1VqsvOxs4dsglMk3wCxxB-_y58G3zyzU"></script> <!-- Google Maps API 스크립트 추가 -->
    <style>
        #map {
            height: 500px; /* 지도의 높이를 설정 */
            width: 100%; /* 지도의 너비를 설정 */
        }
    </style>
</head>
<body>
<header>
        <th:block th:insert="~{/fragments/header2.html}"></th:block>
</header>
<h1>안전 구역 지도</h1>
<div id="map"></div> <!-- 지도를 표시할 div 추가 -->

<script>
    $(document).ready(function(){
        var busanCenter = { lat: 35.1796, lng: 129.0756 }; // 부산의 중심 좌표
        
        // 위험 마커 좌표 예시 (부산 근처 1km 내에 위치한 10개의 마커)
        var dangerLocations = [
            { lat: 35.1800, lng: 129.0700 },
            { lat: 35.1810, lng: 129.0710 },
            { lat: 35.1820, lng: 129.0720 },
            { lat: 35.1830, lng: 129.0730 },
            { lat: 35.1840, lng: 129.0740 },
            { lat: 35.1850, lng: 129.0750 },
            { lat: 35.1860, lng: 129.0760 },
            { lat: 35.1870, lng: 129.0770 },
            { lat: 35.1880, lng: 129.0780 },
            { lat: 35.1890, lng: 129.0790 }
        ];

        // 지도를 초기화하고 부산 중심으로 설정
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 15,
            center: busanCenter
        });

        // 위험 마커를 지도에 추가
        dangerLocations.forEach(function(location) {
            new google.maps.Marker({
                position: location,
                map: map,
                icon: {
                    url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png" // 위험을 나타내는 빨간색 마커 아이콘
                }
            });
        });

        // 사용자 현재 위치 표시 (여기서는 부산 중심으로 설정)
        var userMarker = new google.maps.Marker({
            position: busanCenter,
            map: map,
            icon: {
                url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png" // 사용자를 나타내는 파란색 마커 아이콘
            },
            title: "현재 위치"
        });

        // 1km 반경 원 그리기
        var cityCircle = new google.maps.Circle({
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF0000",
            fillOpacity: 0.35,
            map: map,
            center: busanCenter,
            radius: 1000 // 반경 1km
        });
    });
</script>
</body>
</html>
